<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel='shortcut icon' type='image/x-icon' href='favicon.ico' />
  <link rel="stylesheet" href="css/style4.css">

  <!-- Config tag -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <meta name="language" content="pt-BR">
  <meta charset="UTF-8">

  <!-- Metatags SEO-->
  <title>Youtube Reload</title>
  <meta name="description" content="Gere playlists que você nunca ouviu antes!">
  <meta name="keywords" content="youtube, reload, playlist">
  <meta name="author" content="Gabriel Gregorio">
  <meta name="creator" content="Gabriel Gregorio">


  <!-- SMO -->
  <meta property="og:image" content="youtubeReload.png">
  <meta property="og:image:width" content="758" />
  <meta property="og:image:height" content="623" />
  <meta property="og:title" content="Youtube Reload">
  <meta property="og:description" content="Gere playlists que você nunca ouviu antes!">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://gabrielogregorio.com/projetos/youtubeReload/">
  <meta property="og:site_name" content="Youtube Reload">
  <meta property="og:locale" content="pt_BR" />

</head>

<body>
  <div id="app"></div>
</body>

<script src="vue@2.6.12.js"></script>

<script>
  new Vue({
    el: '#app',
    template: `

<main>
  <header>
    <h1>Youtube<span>Reload</span></h1>
    <nav>
      <button v-on:click="trocarTela(1)" class="btn1 nav-active">Inicio</button>
      <button v-on:click="trocarTela(2)" class="btn2">Favoritos</button>
      <button v-on:click="trocarTela(3)" class="btn3">Não gostei</button>
    </nav>
  </header>

  <section class="description">
    <h2>Gere playlist com músicas que você nunca ouviu, sem nenhum algoritmo de IA.</h2>
    <button v-on:click="limparLocalStorage()">Limpar Preferências</button>
  </section>

  <div class="tela-principal display-block">
    <div class="grid-filtros">
      <div class="filtro-item">
        <h3>Filtrar épocas</h3>
        <div class="filtro-grid-1">
          <div class="filtro-item-grid">
            <input v-on:click="functionIgnoreDates(2019)" type="checkbox" checked="checked">
            <label class="container">Excluir 2019</label>
          </div><!-- filtro-item-grid -->

          <div class="filtro-item-grid">
            <input v-on:click="functionIgnoreDates(2020)" type="checkbox" checked="checked">
            <label class="container">Excluir 2020</label>
          </div><!-- filtro-item-grid -->

          <div class="filtro-item-grid">
            <input v-on:click="functionIgnoreDates(2021)" type="checkbox" checked="checked">
            <label class="container">Excluir 2021</label>
          </div><!-- filtro-item-grid -->
        </div><!-- filtro-grid-1 -->
      </div><!-- filtro-item -->
    
      
      <div class="filtro-item">
        <!-- <h3>Ignorar Autores que você conheçe</h3>  -->
        <div class="filtro-grid-3">
          <!--
          <div v-for="(author, index) in this.authors" class="filtro-item-grid">
            <input v-if="ignoreAuthors.includes(author)" v-on:click="functionIgnoreAuthors(author)" type="checkbox" checked="checked">
            <input v-if="!ignoreAuthors.includes(author)" v-on:click="functionIgnoreAuthors(author)" type="checkbox">
            <label class="container">{{author}}</label>
          </div>--><!-- filtro-item-grid -->
    
        </div><!-- filtro-grid-3 -->
      </div><!-- filtro-item -->
    </div><!-- grid-filtros -->
   
    <section class="videos">
      <div class="flex-videos">
    
        <div v-for="(playlist, index) in formatPlaylist" :key="playlist.url" class="item-video">
          <div class="video-img">
            <a target="_blank" :href="playlist.url"><img :src="playlist.img" alt=""> </a>
          </div><!-- video-img -->
    
          <div class="video-conteudo">
            <div class="video-conteudo-titulo">
              <p><a  target="_blank" :href="playlist.url">{{ playlist.title }}</a></p>
            </div><!-- video-conteudo-titulo -->
    
            <div class="video-conteudo-autor">
              <p><a target="_blank" :href="playlist.url">{{ playlist.author }}</a></p>
            </div><!-- video-conteudo-autor -->
    
            <div class="video-conteudo-botoes">
              <button v-on:click="sendLike(playlist.item_id)" v-if="!playlist.like">Gostei</button>
              <button v-on:click="sendLike(playlist.item_id)" v-if="playlist.like" class="selected">Gostei</button>
              <button v-on:click="sendDislike(playlist.item_id)" v-if="!playlist.dislike">ignorar</button>
              <button v-on:click="sendDislike(playlist.item_id)" v-if="playlist.dislike" class="selected">ignorar</button>
            </div><!-- video-conteudo-botoes -->
          </div><!-- video-conteudo -->
        </div><!-- item-video -->
    
      </div><!-- flex-videos -->
    </section><!-- videos -->

    <section class="gerar-playlist">
      <button v-on:click="gerarPlaylistAleatoria()">Gerar Playlist</button>
    </section>
    
  </div><!-- tela principal-->


  <div class="tela-favoritos display-none">
    <section class="videos">
      <div class="flex-videos">
    
        <div v-for="(playlist, index) in formatPlaylistLikes" :key="playlist.url" class="item-video">
          <div class="video-img">
            <a target="_blank" :href="playlist.url"><img :src="playlist.img" alt=""> </a>
          </div><!-- video-img -->
    
          <div class="video-conteudo">
            <div class="video-conteudo-titulo">
              <p><a  target="_blank" :href="playlist.url">{{ playlist.title }}</a></p>
            </div><!-- video-conteudo-titulo -->
    
            <div class="video-conteudo-autor">
              <p><a target="_blank" :href="playlist.url">{{ playlist.author }}</a></p>
            </div><!-- video-conteudo-autor -->
    
            <div class="video-conteudo-botoes">
              <button v-on:click="sendLike(playlist.item_id)" v-if="!playlist.like">Gostei</button>
              <button v-on:click="sendLike(playlist.item_id)" v-if="playlist.like" class="selected">Gostei</button>
              <button v-on:click="sendDislike(playlist.item_id)" v-if="!playlist.dislike">ignorar</button>
              <button v-on:click="sendDislike(playlist.item_id)" v-if="playlist.dislike" class="selected">ignorar</button>
            </div><!-- video-conteudo-botoes -->
          </div><!-- video-conteudo -->
        </div><!-- item-video -->

      </div><!-- flex-videos -->
    </section><!-- videos -->
  </div><!-- tela-favoritos -->

  <div class="tela-nao-gostei display-none">
    <section class="videos">
      <div class="flex-videos">
    
        <div v-for="(playlist, index) in formatPlaylistDislikes" :key="playlist.url" class="item-video">
          <div class="video-img">
            <a target="_blank" :href="playlist.url"><img :src="playlist.img" alt=""> </a>
          </div><!-- video-img -->
    
          <div class="video-conteudo">
            <div class="video-conteudo-titulo">
              <p><a  target="_blank" :href="playlist.url">{{ playlist.title }}</a></p>
            </div><!-- video-conteudo-titulo -->
    
            <div class="video-conteudo-autor">
              <p><a target="_blank" :href="playlist.url">{{ playlist.author }}</a></p>
            </div><!-- video-conteudo-autor -->
    
            <div class="video-conteudo-botoes">
              <button v-on:click="sendLike(playlist.item_id)" v-if="!playlist.like">Gostei</button>
              <button v-on:click="sendLike(playlist.item_id)" v-if="playlist.like" class="selected">Gostei</button>
              <button v-on:click="sendDislike(playlist.item_id)" v-if="!playlist.dislike">ignorar</button>
              <button v-on:click="sendDislike(playlist.item_id)" v-if="playlist.dislike" class="selected">ignorar</button>
            </div><!-- video-conteudo-botoes -->
          </div><!-- video-conteudo -->
        </div><!-- item-video -->

      </div><!-- flex-videos -->
    </section><!-- videos -->
  </div><!-- tela-tela-nao-gostei -->
</main>
    `,
    data() {
      return {

        // Playlist de musicas que serão renderizadasao usuário
        playList: [
        ],

        // Serve unicamente para acordar um watcher para atualizar o localstorage
        // Tem um bug que o vuejs não escuta alterações dentro do array nos objetos
        alteracoes: 0,

        // Conjunto de musicas que poderão ser sorteadas
        musicas_possiveis: [
        ],

        // Playlist de musicas que receberam dislikes
        playlistDislike: [
        ],

        // Playlist de musicas que receberam likes
        playlistLike: [
        ],

        // Lista de autores disponíveis para a busca
        authors: [
        ],

        // Lista de autores que serão ignorados
        ignoreAuthors: [
          //'Giulia Be', 'Miley Cyrus', 'Naiara Azevedo', 'Shakira', 'Luis Fonsi', 'Malu', 'Paula Fernandes', 'Banda Vingadora', 'Psirico'
        ],

        // Datas que serão ignoradas
        ignoreDates: [2019, 2020, 2021],


        itemsLocalStorage: '',
        jsonItems: {},
        ids_json_like: {},


        // Conjunto de items em si
        items: [
         {
            author: 'Regina Spektor',
            title: 'Us',
            id: 'fczPlmz-Vug',
            like: false,
            dislike: false,
            ano: 2003
         },
         {
            author: 'Cheiro de Amor/Carla Visi',
            title: 'Vai Sacudir, Vai Abalar',
            id: 'bEjaM9GbI6s',
            like: false,
            dislike: false,
            ano: 1996
         },
         {
            author: 'Regina Spektor',
            title: "Don't Leave Me (Ne Me Quitte Pas)",
            id: 'BWXWivwhi14',
            like: false,
            dislike: false,
            ano: 2012
         },
         {
            author: 'Banda Eva/Ivete Sangalo',
            title: 'Beleza Rara',
            id: 'I1cJnN-o7vU',
            like: false,
            dislike: false,
            ano: 1996
         },
         {
            author: 'Thaeme e Thiago',
            title: 'Cafajeste',
            id: '4GnnRiezYd8',
            like: false,
            dislike: false,
            ano: 2014
          },   
          {
            author: 'Babado Novo',
            title: 'Babado Novo - Bola De Sabão',
            id: '_w3AoEcImkw',
            like: false,
            dislike: false,
            ano: 2005
          },
          {
            author: 'Roxette',
            title: 'It Must Have Been Love',
            id: 'k2C5TjS2sh4',
            like: false,
            dislike: false,
            ano: 1986
          },
          {
            author: 'Vivo',
            title: '"DELEI" – O rapaz que vive atrasado',
            id: '3QaxlK4kolw',
            like: false,
            dislike: false,
            ano: 2014 
          },
          {
            author: 'Gaby Amarantos',
            title: 'Ex Mai Love',
            id: 's-5RfIXRIto',
            like: false,
            dislike: false,
            ano: 2012
          },
          {
            author: 'Psirico',
            title: 'Psirico - Lepo Lepo (Clipe Oficial)',
            id: 'AHVS5DW434g',
            like: false,
            dislike: false,
            ano: 2014
          },
          {
            author: 'Banda Vingadora',
            title: 'Banda Vingadora - Metralhadora [Clipe Oficial]',
            id: 'YzCoZGsod0c',
            like: false,
            dislike: false,
            ano: 2015
          },
          {
            author: 'Malu',
            title: 'Disco Arranhado (Funk Remix)',
            id: 'kykoK_afoAQ',
            like: false,
            dislike: false,
            ano: 2021
          },
          {
            author: 'Paula Fernandes',
            title: 'Taylor Swift, Paula Fernandes - Long Live (Official Music Video)',
            id: '1etzkcAo6WA',
            like: false,
            dislike: false,
            ano: 2010
          },
          {
            author: 'Luis Fonsi',
            title: 'Luis Fonsi - Despacito ft. Daddy Yankee',
            id: 'kJQP7kiw5Fk',
            like: false,
            dislike: false,
            ano: 2017
          },
          {
            author: 'Shakira',
            title: 'Shakira - Rabiosa (English Version) ft. Pitbull',
            id: 'a5irTX82olg',
            like: false,
            dislike: false,
            ano: 2010
          },
          {
            author: 'Naiara Azevedo',
            title: 'Naiara Azevedo COITADO (Clipe Oficial DVD HD)',
            id: 'cus-lGN0vds',
            like: false,
            dislike: false,
            ano: 2016
          },
          {
            author: 'Miley Cyrus',
            title: 'Miley Cyrus - Party In The U.S.A. (Official Video)',
            id: 'M11SvDtPBhA',
            like: false,
            dislike: false,
            ano: 2009
          },
          {
            author: 'Vengaboys',
            title: 'Vengaboys - We like to Party! (The Vengabus)',
            id: '6Zbi0XmGtMw',
            like: false,
            dislike: false,
            ano: 1998
          },
          {
            author: 'Giulia Be',
            title: 'Giulia Be - menina solta (video)',
            id: 'vz9XHsctOtc',
            like: false,
            dislike: false,
            ano: 2020
          },
          {
            author: 'Caroline Jones',
            title: 'Caroline Jones - Rise (Official Music Video)',
            id: 'VqlwKBrrMXk',
            like: false,
            dislike: false,
            ano: 2017
          },
          {
            author: 'Kelly Key',
            title: 'Kelly Key - Cachorrinho (Clipe Oficial)',
            id: 'bANQVGy-wq4',
            like: false,
            dislike: false,
            ano: 2001
          },
          {
            author: 'Spice Girls',
            title: 'Spice Girls - Wannabe',
            id: 'gJLIiF15wjQ',
            like: false,
            dislike: false,
            ano: 1996
          },
          {
            author: 'Aqua',
            title: 'Aqua - Barbie Girl (Official Music Video)',
            id: 'ZyhrYis509A',
            like: false,
            dislike: false,
            ano: 1997
          },
          {
            author: 'Loona',
            title: 'Loona - Parapapapapa',
            id: 'Q_NqQq51jaM',
            like: false,
            dislike: false,
            ano: 2009
          },
          {
            author: 'Vengaboys',
            title: 'Vengaboys - Boom Boom Boom (Live in Germany 2012 HD)',
            id: 'YKNkC6Sk7DU',
            like: false,
            dislike: false,
            ano: 1998
          },
          {
            author: 'Carly Rae Jepsen',
            title: 'Carly Rae Jepsen - Call Me Maybe',
            id: 'fWNaR-rxAic',
            like: false,
            dislike: false,
            ano: 2012
          },
          {
            author: 'Imagine Dragons',
            title: 'Imagine Dragons - Radioactive',
            id: 'ktvTqknDobU',
            like: false,
            dislike: false,
            ano: 2012
          },
          {
            author: 'Rednex',
            title: 'Rednex - Cotton Eye Joe (Official Music Video) [HD] - RednexMusic com',
            id: 'mOYZaiDZ7BM',
            like: false,
            dislike: false,
            ano: 1995
          },
          {
            author: 'Boom',
            title: 'Boom! - How Do You Do (C. Baumann Video Edit)',
            id: '23UGN3qqBWY',
            like: false,
            dislike: false,
            ano: 2009
          },
          {
            author: 'Loretta Lynn, Conway Twitty',
            title: 'Conway Twitty Loretta Lynn Louisiana Woman , Mississippi Man',
            id: '2Gd0tgGVPB0',
            like: false,
            dislike: false,
            ano: 1973
          },
          {
            author: 'Avicii',
            title: 'Avicii - Hey Brother',
            id: '6Cp6mKbRTQY',
            like: false,
            dislike: false,
            ano: 2013
          },
          {
            author: 'OneRepublic',
            title: 'OneRepublic - Counting Stars (Official Music Video)',
            id: 'hT_nvWreIhg',
            like: false,
            dislike: false,
            ano: 2013
          },
          {
            author: 'David Guetta',
            title: 'David Guetta - Titanium ft. Sia (Official Video)',
            id: 'JRfuAukYTKg',
            like: false,
            dislike: false,
            ano: 2011
          },
          {
            author: 'Ricky Martin',
            title: 'Ricky Martin - Livin La Vida Loca',
            id: 'p47fEXGabaY',
            like: false,
            dislike: false,
            ano: 1999
          },
          {
            author: 'Las Ketchup',
            title: 'Aserejé (The Ketchup Song) [Spanish Version] - Las Ketchup',
            id: 'arZZw8NyPq8',
            like: false,
            dislike: false,
            ano: 2002
          },
          {
            author: 'P!nk',
            title: 'P!nk - Try (Official Video)',
            id: 'yTCDVfMz15M',
            like: false,
            dislike: false,
            ano: 2012
          },
          {
            author: 'Latino',
            title: 'Latino - Renata',
            id: 'LnAJjRflHFE',
            like: false,
            dislike: false,
            ano: 2004
          },
          {
            author: 'Perlla',
            title: 'Tremendo Vacilao',
            id: 'DN5_iOrJjfc',
            like: false,
            dislike: false,
            ano: 2006
          },
          {
            author: 'Anastacia',
            title: 'Anastacia - Sick and Tired (from Live at Last)',
            id: 'CshDagHHzmI',
            like: false,
            dislike: false,
            ano: 2017
          },
          {
            author: 'Anne Marie',
            title: 'Anne Marie - Ciao Adios (Radio 1s Big Weekend 2017)',
            id: 'FrA98gZGbDI',
            like: false,
            dislike: false,
            ano: 2016
          },
          {
            author: 'Luka',
            title: 'Luka - Tô nem aí (Clipe)',
            id: 'vO8XQD6mHNg',
            like: false,
            dislike: false,
            ano: 2003
          },
          {
            author: 'Charli XCX',
            title: 'Charli XCX - Break The Rules [Official Video]',
            id: 'ABhDiXbUaBE',
            like: false,
            dislike: false,
            ano: 2014
          },
          {
            author: 'Marcelo D2',
            title: 'Marcelo D2 & Claudia - Desabafar / Deixa Eu Dizer [Fast Five Soundtrack] w Lyrics',
            id: 'fTGIHRT9KsI',
            like: false,
            dislike: false,
            ano: 2008
          },
          {
            author: 'Shania Twain',
            title: 'Shania Twain - Any Man Of Mine (Official Music Video)',
            id: '8N2k-gv6xNE',
            like: false,
            dislike: false,
            ano: 1995
          },
          {
            author: 'Ananda',
            title: 'Ananda, Joker Beats - Quero Que Tu Vá',
            id: 'w_ejwSACf_U',
            like: false,
            dislike: false,
            ano: 2019
          },
          {
            author: 'Jessie J',
            title: 'Jessie J - Price Tag ft. B.o.B',
            id: 'qMxX-QOV9tI',
            like: false,
            dislike: false,
            ano: 2011
          },
          {
            author: 'Sean Kingston',
            title: 'Sean Kingston - Beautiful Girls',
            id: 'MrTz5xjmso4',
            like: false,
            dislike: false,
            ano: 2009
          },
          {
            author: 'Joan Osborne',
            title: 'Joan Osborne - One Of Us',
            id: 'aDdOnl0bHO4',
            like: false,
            dislike: false,
            ano: 1995
          },
          {
            author: 'Amy Winehouse',
            title: 'Amy Winehouse - Rehab',
            id: 'KUmZp8pR1uc',
            like: false,
            dislike: false,
            ano: 2006
          },
          {
            author: 'Amy Winehouse',
            title: 'Amy Winehouse - Back To Black',
            id: 'TJAfLE39ZZ8',
            like: false,
            dislike: false,
            ano: 2006
          },
          {
            author: 'Avril Lavigne',
            title: 'Avril Lavigne - Complicated (Official Video)',
            id: '5NPBIwQyPWE',
            like: false,
            dislike: false,
            ano: 2002
          },
          {
            author: 'Maroon 5',
            title: 'Maroon 5 - Sugar (Official Music Video)',
            id: '09R8_2nJtjg',
            like: false,
            dislike: false,
            ano: 2015
          },
          {
            author: 'Camila Cabello',
            title: 'Camila Cabello - Havana Official Music Video',
            id: 'I3vks3Nblhw',
            like: false,
            dislike: false,
            ano: 2018
          },
          {
            author: 'Twenty One Pilots',
            title: 'twenty one pilots - Ride (Official Video)',
            id: 'Pw-0pbY9JeU',
            like: false,
            dislike: false,
            ano: 2015
          },
          {
            author: 'Loona',
            title: 'Loona - Vamos a la playa OFFICIAL VIDEO',
            id: 'X-77txuiVXs',
            like: false,
            dislike: false,
            ano: 2010
          },
          {
            author: 'Cherona',
            title: 'Cherona - Rigga-Ding-Dong-Song (Videoclip)',
            id: '3f43xmRqxOM',
            like: false,
            dislike: false,
            ano: 2009
          },
          {
            author: 'Aqua',
            title: 'Aqua - Cartoon Heroes',
            id: 'Q_LPJllaogU',
            like: false,
            dislike: false,
            ano: 2003
          },
          {
            author: 'Red Hot Chili Peppers',
            title: 'Red Hot Chili Peppers - Californication [Official Music Video]',
            id: 'YlUKcNNmywk',
            like: false,
            dislike: false,
            ano: 1999
          },
          {
            author: 'Thaeme & Thiago',
            title: 'Thaeme & Thiago - Ai que Dó',
            id: 'Ul4fQt4VvoA',
            like: false,
            dislike: false,
            ano: 2012
          },
          {
            author: 'Kesha',
            title: 'Ke$ha - Take It Off',
            id: 'edP0L6LQzZE',
            like: false,
            dislike: false,
            ano: 2010
          },
          {
            author: 'Empreguetes',
            title: 'Vida De Empreguete',
            id: 'LuNexytb77g',
            like: false,
            dislike: false,
            ano: 2012
          },
          {
            author: 'Jameika Mansur',
            title: 'Clima de Rodeio',
            id: '8rGgsN5RAmI',
            like: false,
            dislike: false,
            ano: 2003
          },
          {
            author: 'Miranda Cosgrove',
            title: 'About You Now (Video)',
            id: 'AlIUNtQEI_s',
            like: false,
            dislike: false,
            ano: 2008
          },
          {
            author: 'Miranda Cosgrove',
            title: 'Leave It All To Me',
            id: 'HPM05dQgdig',
            like: false,
            dislike: false,
            ano: 2008
          },
          {
            author: 'Lily Allen',
            title: 'Not Fair',
            id: 'fUYaosyR4bE',
            like: false,
            dislike: false,
            ano: 2009
          },
          {
            author: 'Roberta Campos',
            title: 'De Janeiro A Janeiro',
            id: 'J08WH4-4798',
            like: false,
            dislike: false,
            ano: 2008
          }
        ]
      }
    },

    // Escuta alterações nas variáveis
    watch: {
      alteracoes() {
        // Salva uma os itens no localstorage
        localStorage.setItem('items', JSON.stringify(this.items));
        localStorage.setItem('ignoreAuthors', JSON.stringify({ignore:this.ignoreAuthors}));

      }
    },

    // Assim que a página for criada
    mounted() {
    
      this.$nextTick(()=>{
        // Se estiver salvo no localstorage!
        // Pegue os itens
        if (localStorage.getItem('ignoreAuthors')) {
          ignoreAuthorsJson = localStorage.getItem('ignoreAuthors'); //Obter
          this.ignoreAuthors = JSON.parse(ignoreAuthorsJson ).ignore
        }

        if (localStorage.getItem('items')) {
          this.itemsLocalStorage = localStorage.getItem('items'); //Obter
          this.jsonItems = JSON.parse(this.itemsLocalStorage); // String to json

          this.jsonItems.forEach(json => {
            this.ids_json_like[json.id] = {like: json.like, dislike:json.dislike}
          })


          for (x=0; x < this.items.length; x++) {
            if (this.items[x].id in this.ids_json_like) {
            } else {
              this.jsonItems.push(this.items[x])
            }
          }
          this.items = this.jsonItems;
        }

        // lista com todos os autores disponíveis
        this.items.forEach(item => {       
          if (!this.authors.includes(item.author)) {
            this.authors.push(item.author);
          }
        })
      })
    },
    // Métodos para usos gerais
    methods: {

      // Ignorar autores
      functionIgnoreAuthors(author) {
        if (!this.ignoreAuthors.includes(author)) {
          this.ignoreAuthors.push(author);
          console.log('ignorar' + author);
        } else {
          // Excluir o author da lista
          // Remove 1 item
          var index = this.ignoreAuthors.indexOf(author);
          if (index != -1) {
            this.ignoreAuthors.splice(index, 1);
          }
        }

        this.alteracoes += 1;
      },

      // Ignorar datas
      functionIgnoreDates(date) {
        if (!this.ignoreDates.includes(date)) {
          this.ignoreDates.push(date);
        } else {
          var index = this.ignoreDates.indexOf(date);
          if (index != -1) {
            this.ignoreDates.splice(index, 1);
          }
        }
      },

      // Gerencia o controle de telas
      trocarTela(screen) {
        // Troca as telas da aplicação

        // Divs com as telas disponíveis
        let tela_principal = document.getElementsByClassName('tela-principal')[0];
        let tela_favoritos = document.getElementsByClassName('tela-favoritos')[0];
        let tela_nao_gostei = document.getElementsByClassName('tela-nao-gostei')[0];

        let btn1 = document.getElementsByClassName('btn1')[0];
        let btn2 = document.getElementsByClassName('btn2')[0];
        let btn3 = document.getElementsByClassName('btn3')[0];

        // Valores padrões que os objetos sempre terão
        btn1.classList = 'btn1';
        btn2.classList = 'btn2';
        btn3.classList = 'btn3';

        tela_principal.classList = "tela-principal";
        tela_favoritos.classList = "tela-favoritos";
        tela_nao_gostei.classList = "tela-nao-gostei";

        // Seleciona as telas
        if (screen == 1) {
          btn1.classList.toggle('nav-active');
          tela_principal.classList.toggle('display-block');

        } else if (screen == 2) {
          btn2.classList.toggle('nav-active');
          tela_favoritos.classList.toggle('display-block');

          // Carrega os likes
          this.playlistLike = [];
          this.items.forEach(item => {
            if (item.like) {this.playlistLike.push(item)}
          })

        } else if (screen == 3) {

          btn3.classList.toggle('nav-active');
          tela_nao_gostei.classList.toggle('display-block');

          // Carrega os dislikes
          this.playlistDislike = [];
          this.items.forEach(item => {
            if (item.dislike) {this.playlistDislike.push(item)}
          })
        }
      },

      // Gera uma playlist aleatória
      gerarPlaylistAleatoria() {

        this.musicas_possiveis = [];

        // Registra a posição para otimizar a localização do item
        let item_id = 0;
        this.items.forEach(item => {

          // Se não tem likes ou dislikes
          if (!item.like && !item.dislike) {

            // O autor foi ignorado?
            if (!this.ignoreAuthors.includes(item.author)) {

              // O ano foi ignorado
              if(!this.ignoreDates.includes(item.ano)) {
                // Salve dentro das musicas possívels
                item.item_id = item_id;
                this.musicas_possiveis.push(item);
              }
            }
          }

          // Registra a posição do item no array principal
          item_id += 1;
        })

        // Escolhe de forma randomica 5 musicas
        this.musicas_possiveis = this.musicas_possiveis.sort(() => Math.random() - 0.5)
        this.playList = this.musicas_possiveis.slice(0, 15);

        setTimeout(() => {
          window.scrollBy({top: 100, left: 0, behavior : "smooth"});
        }, 200)
        
      },

      // Envia um dislike
      sendDislike(item_id) {
        if (!this.items[item_id].dislike) {
          this.items[item_id].dislike = true;
          this.items[item_id].like = false;
        } else {
          this.items[item_id].dislike = false;
        }

        // Acorda o watcher para atualizar o localstorage
        this.alteracoes += 1;
      },

      // Envia um like
      sendLike(item_id){
        if (!this.items[item_id].like) {
          this.items[item_id].like = true;
          this.items[item_id].dislike = false;
        } else {
          this.items[item_id].like = false;
        }
        // Acorda o watcher para atualizar o localstorage
        this.alteracoes += 1;
      },
      limparLocalStorage() {
        localStorage.removeItem('items');
        localStorage.removeItem('ignoreAuthors');
        document.location.reload(true);
      }
    },

    // Manipula os dados para o frontend
    computed: {
      formatPlaylist() {
        return this.playList.map(play => ({
          ...play,
          img: 'https://img.youtube.com/vi/' + play.id + '/hqdefault.jpg',
          url: 'https://www.youtube.com/watch?v=' + play.id
        }))  
      },

      formatPlaylistLikes() {
        return this.playlistLike.map(play => ({
          ...play,
          img: 'https://img.youtube.com/vi/' + play.id + '/hqdefault.jpg',
          url: 'https://www.youtube.com/watch?v=' + play.id
        }))  
      },

      formatPlaylistDislikes() {
        return this.playlistDislike.map(play => ({
          ...play,
          img: 'https://img.youtube.com/vi/' + play.id + '/hqdefault.jpg',
          url: 'https://www.youtube.com/watch?v=' + play.id
        }))  
      }
    }
  })
</script>
</body>
</html>
